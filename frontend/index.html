<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File Entry System</title>
    <link rel="stylesheet" href="style.css"> <!-- Will create this later if needed -->
</head>
<body>
    <div class="container"> <!-- Start of new container div -->
        <h1>File Entry</h1>

    <form id="fileEntryForm">
        <div>
            <label for="serial_number">Serial Number:</label>
            <input type="text" id="serial_number" name="serial_number" required>
        </div>
        <div>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div>
            <label for="document_number">Document Number:</label>
            <input type="text" id="document_number" name="document_number">
        </div>
        <div>
            <label for="originating_unit">Originating Unit:</label>
            <input type="text" id="originating_unit" name="originating_unit" required>
        </div>
        <div>
            <label for="deadline">Deadline:</label>
            <input type="date" id="deadline" name="deadline">
        </div>
        <div>
            <label for="category">Category:</label>
            <select id="category" name="category">
                <option value="A">A</option>
                <option value="B">B</option>
            </select>
        </div>
        <button type="submit" id="submitButton">Submit Document</button>
    </form>

    <div id="messageArea"></div>

    <hr>

    <h2>工作看板 (Dashboard)</h2>
    <button id="refreshDashboardButton" style="margin-bottom: 15px;">Refresh Dashboard</button>

    <div>
        <h3>待处理/待收回文件 (Pending Action/Due Recalls)</h3>
        <div id="dashboardDueRecallsArea" style="margin-bottom: 15px;">Loading...</div>
    </div>

    <div>
        <h3>临近/超期文件 (Nearing Deadline / Overdue Documents)</h3>
        <div id="dashboardOverdueDocumentsArea" style="margin-bottom: 15px;">Loading...</div>
    </div>

    <div>
        <h3>工作统计 (Work Statistics)</h3>
        <div id="dashboardStatisticsArea">Loading...</div>
    </div>

    <hr>

    <h2>Personnel Management</h2>
    <form id="addPersonnelForm">
        <div>
            <label for="personnelName">Name:</label>
            <input type="text" id="personnelName" name="personnelName" placeholder="Personnel Name" required>
        </div>
        <div>
            <label for="personnelRole">Role:</label>
            <input type="text" id="personnelRole" name="personnelRole" placeholder="Personnel Role">
        </div>
        <button type="submit">Add Personnel</button>
    </form>
    <div id="personnelMessageArea" style="margin-top: 10px;"></div>
    <button id="refreshPersonnelListButton" style="margin-top: 10px;">Refresh Personnel List</button>
    <div id="personnelListArea" style="margin-top: 10px;">
        <!-- Personnel will be listed here -->
    </div>

    <hr>

    <h2>Search Documents</h2>
    <form id="searchForm">
        <div>
            <label for="search_name_keyword">Name Keyword:</label>
            <input type="text" id="search_name_keyword" name="name_keyword">
        </div>
        <div>
            <label for="search_document_number">Document Number:</label>
            <input type="text" id="search_document_number" name="document_number">
        </div>
        <div>
            <label for="search_originating_unit">Originating Unit:</label>
            <input type="text" id="search_originating_unit" name="originating_unit">
        </div>
        <div>
            <label for="search_category">Category:</label>
            <select id="search_category" name="category">
                <option value="">Any</option>
                <option value="A">A</option>
                <option value="B">B</option>
            </select>
        </div>
        <div>
            <label for="search_entry_date_from">Entry Date From:</label>
            <input type="date" id="search_entry_date_from" name="entry_date_from">
        </div>
        <div>
            <label for="search_entry_date_to">Entry Date To:</label>
            <input type="date" id="search_entry_date_to" name="entry_date_to">
        </div>
        <div>
            <label for="search_status">Status:</label>
            <input type="text" id="search_status" name="status" placeholder="e.g., pending_processing">
        </div>
        <button type="submit">Search</button>
        <button type="button" id="clearSearchButton">Clear Search</button>
    </form>

    <hr>

    <h2>Documents List</h2>
    <button id="refreshListButton">Refresh List</button>
    <div id="documentsListArea">
        <!-- Documents will be listed here by script.js -->
    </div>

    <hr>

    <h2>Flow History</h2>
    <div id="flowHistoryArea">
        <!-- Flow history for a selected document will be shown here -->
    </div>

    <!-- Modal/Section for Sending Document -->
    <div id="sendDocumentModal" style="display:none; border: 1px solid #ccc; padding: 10px; margin-top: 20px;">
        <h3>Send Document</h3>
        <form id="sendDocumentForm">
            <input type="hidden" id="sendDocumentId" name="document_id">
            <div>
                <label for="sendRecipientName">Recipient Name:</label>
                <select id="sendRecipientName" name="recipient_name" required></select>
            </div>
            <div>
                <label for="sendOperatorName">Operator (Sender):</label>
                <select id="sendOperatorName" name="sender_name" required></select>
            </div>
            <div>
                <label for="sendStage">Stage:</label>
                <select id="sendStage" name="stage">
                    <option value="distribution">分办文阶段 (Distribution)</option>
                    <option value="approval">领导签批阶段 (Approval)</option>
                </select>
            </div>
            <div>
                <label for="sendNotes">Notes:</label>
                <textarea id="sendNotes" name="notes"></textarea>
            </div>
            <button type="submit">Confirm Send</button>
            <button type="button" onclick="document.getElementById('sendDocumentModal').style.display='none'">Cancel</button>
        </form>
    </div>

    <!-- Modal/Section for Receiving Document -->
    <div id="receiveDocumentModal" style="display:none; border: 1px solid #ccc; padding: 10px; margin-top: 20px;">
        <h3>Receive Document</h3>
        <form id="receiveDocumentForm">
            <input type="hidden" id="receiveDocumentId" name="document_id">
            <div>
                <label for="receiveReturnerName">Returner Name:</label>
                <select id="receiveReturnerName" name="returner_name" required></select>
            </div>
            <div>
                <label for="receiveOperatorName">Operator (Receiver):</label>
                <select id="receiveOperatorName" name="receiver_name" required></select>
            </div>
            <div>
                <label for="receiveStage">Stage:</label>
                <select id="receiveStage" name="stage">
                    <option value="distribution">分办文阶段 (Distribution)</option>
                    <option value="approval">领导签批阶段 (Approval)</option>
                </select>
            </div>
            <div>
                <label for="receiveNotes">Notes:</label>
                <textarea id="receiveNotes" name="notes"></textarea>
            </div>
            <button type="submit">Confirm Receive</button>
            <button type="button" onclick="document.getElementById('receiveDocumentModal').style.display='none'">Cancel</button>
        </form>
    </div>

    <div id="actionMessageArea" style="margin-top: 10px;"></div>

    </div> <!-- End of new container div -->

    <script src="script.js"></script>
</body>
</html>
